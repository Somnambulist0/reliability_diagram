# Reliability Diagram (Precision-Confidence Diagram)

## I. Running the code

### Quick start :

### YOLO:
The .pkl file generated by mmyolo has both groud truth and predicted results, so you only need to set the `.pkl file` path and `result dictionary` path (optional).

#### If you want to draw the general reliability (P-C) digarm :

```bash
python yolo_pc_plot.py /path/to/your/.pkl/file   /path/to/your/result/dictionary/
```
#### If you want to draw the all classes reliability (P-C) digarm :

```bash
python yolo_pc_class_plot.py /path/to/your/.pkl/file   /path/to/your/result/dictionary/
```
#### Example
```bash
#general version
python yolo_pc_plot.py  ./results_city.pkl  ./yolo_total

#all classes version
python yolo_pc_class_plot.py  ./results_city.pkl  ./yolo_classes
```
---
### Faster R-CNN:
If you train the Faster R-CNN model through **mmdetection**, you may get the `.pkl file` which only includes prediected results and **no ground truth**. To solve this problem directly, we need both `.pkl file` and your `original annotation json file`, which you use to test the model. You need to set the `.pkl file` path `json file` path and `result dictionary` path (optional).

#### If you want to draw the general reliability (P-C) digarm :

```bash
python frcnn_nogt_plot.py  /path/to/your/.pkl/file   /path/to/your/json/file   /path/to/your/result/dictionary/
```
#### If you want to draw the all classes reliability (P-C) digarm :

```bash
python frcnn_nogt_plot_class.py /path/to/your/.pkl/file   /path/to/your/json/file   /path/to/your/result/dictionary/
```
#### Example
```bash
#general version
python frcnn_nogt_plot.py  ./frcnn_city.pkl ./val.json ./fastrcnn_total

#all classes version
python frcnn_nogt_plot_class.py  ./frcnn_city.pkl ./val.json ./fastrcnn_classes
```


## Results


<details>
  <summary><b>YOLO</b></summary>

* Download the results [here](https://drive.google.com/drive/folders/1nkI-XmHxhHOKLAfe4tNSv7lAsdcPlQgR?usp=sharing). 

</details>


<details>
  <summary><b>Faster R-CNN</b></summary>

* Download the results [here](https://drive.google.com/drive/folders/1-t0odqWutUshVfxE_WMWDCz5pPvVyrB8?usp=sharing). 

</details>
